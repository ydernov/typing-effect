name: Release workflow
run-name: Release workflow for ${{ github.ref_name }}

on:
  release:
    types: [published]

jobs:
  set-version-to-tag:
    uses: ./.github/workflows/set-version-to-tag.yml
    with:
      ref: ${{github.ref}}
      ref_name: ${{github.ref_name}}

  create-and-publish-coverage:
    needs: set-version-to-tag
    uses: ./.github/workflows/coverage-and-badge.yml
    with:
      ref: ${{github.ref}}
    
  publish-to-github-packages:
    needs: set-version-to-tag
    uses: ./.github/workflows/publish-to-github-packages.yml
    with:
      ref: ${{github.ref}}

  publish-to-npm:
    needs: set-version-to-tag
    uses: ./.github/workflows/publish-to-npm.yml
    with:
      ref: ${{github.ref}}
